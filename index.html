<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÏÜåÎã¥ÏÑúÏö∏ ÏòàÏïΩ Í¥ÄÎ¶¨ v2</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#3B82F6">
    
    <!-- React & Babel -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <style>
        /* Ïª§Ïä§ÌÖÄ Ïä§ÌÉÄÏùº */
        body {
            overscroll-behavior: contain;
        }
        
        /* Î™®Î∞îÏùº ÌÉ≠ ÌïòÏù¥ÎùºÏù¥Ìä∏ Ï†úÍ±∞ */
        * {
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Ïä¨ÎùºÏù¥Îìú Ïï†ÎãàÎ©îÏù¥ÏÖò */
        @keyframes slideUp {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .slide-up {
            animation: slideUp 0.3s ease-out;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        
        // Firebase ÏÑ§Ï†ï
        const firebaseConfig = {
            apiKey: "AIzaSyDirTw6VCHrbTsx4qit7kBMqAO2E7K5Rls",
            authDomain: "sodam-seoul.firebaseapp.com",
            databaseURL: "https://sodam-seoul-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "sodam-seoul",
            storageBucket: "sodam-seoul.firebasestorage.app",
            messagingSenderId: "789780946324",
            appId: "1:789780946324:web:e3f9e10ef6b6a1d36a4381"
        };
        
        // Firebase Ï¥àÍ∏∞Ìôî
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // Î©îÏù∏ Ïï± Ïª¥Ìè¨ÎÑåÌä∏
        function App() {
            // ÏÉÅÌÉú Í¥ÄÎ¶¨
            const [currentDate, setCurrentDate] = useState(new Date());
            const [mealTime, setMealTime] = useState('lunch');
            const [viewMode, setViewMode] = useState('list'); // Í∏∞Î≥∏Í∞íÏùÑ listÎ°ú Î≥ÄÍ≤Ω
            const [reservations, setReservations] = useState({});
            const [selectedReservation, setSelectedReservation] = useState(null);
            const [showForm, setShowForm] = useState(false);
            const [isOnline, setIsOnline] = useState(navigator.onLine);
            const [currentWeek, setCurrentWeek] = useState(new Date());
            
            // Ìèº Îç∞Ïù¥ÌÑ∞
            const [formData, setFormData] = useState({
                table: '',
                name: '',
                phone: '',
                people: '',
                time: '',
                memo: ''
            });
            
            // ÌÖåÏù¥Î∏î Ï†ïÎ≥¥
            const tables = {
                room: ['1A', '4A', '4B'],
                floor2: {
                    A: ['2A1', '2A2', '2A3'],
                    B: ['2B1', '2B2', '2B3', '2B4']
                },
                floor3: {
                    A: ['3A1', '3A2', '3A3'],
                    B: ['3B1', '3B2', '3B3', '3B4']
                }
            };
            
            // ÌÖåÏù¥Î∏î ÏàòÏö© Ïù∏Ïõê
            const getTableCapacity = (tableId) => {
                if (['1A', '4A', '4B'].includes(tableId)) return 10;
                if (tableId.includes('A')) return 4;
                if (tableId.includes('B')) return 6;
                return 4;
            };
            
            // ÏãúÍ∞Ñ ÏòµÏÖò ÏÉùÏÑ±
            const getTimeSlots = () => {
                const isSaturday = currentDate.getDay() === 6;
                
                if (isSaturday) {
                    if (mealTime === 'lunch') {
                        return generateTimeSlots('12:00', '16:50', 10);
                    } else {
                        return generateTimeSlots('17:00', '21:50', 10);
                    }
                } else {
                    if (mealTime === 'lunch') {
                        return generateTimeSlots('11:30', '14:30', 10);
                    } else {
                        return generateTimeSlots('17:30', '21:00', 10);
                    }
                }
            };
            
            // ÏãúÍ∞Ñ Ïä¨Î°Ø ÏÉùÏÑ± Ìó¨Ìçº Ìï®Ïàò
            const generateTimeSlots = (start, end, interval) => {
                const slots = [];
                const [startHour, startMin] = start.split(':').map(Number);
                const [endHour, endMin] = end.split(':').map(Number);
                
                let currentHour = startHour;
                let currentMin = startMin;
                
                while (currentHour < endHour || (currentHour === endHour && currentMin <= endMin)) {
                    slots.push(`${currentHour.toString().padStart(2, '0')}:${currentMin.toString().padStart(2, '0')}`);
                    
                    currentMin += interval;
                    if (currentMin >= 60) {
                        currentHour += Math.floor(currentMin / 60);
                        currentMin = currentMin % 60;
                    }
                }
                
                return slots;
            };
            
            // Firebase Ïã§ÏãúÍ∞Ñ ÎèôÍ∏∞Ìôî
            useEffect(() => {
                const reservationsRef = database.ref('reservations');
                
                const handleData = (snapshot) => {
                    const data = snapshot.val() || {};
                    setReservations(data);
                };
                
                reservationsRef.on('value', handleData);
                
                return () => {
                    reservationsRef.off('value', handleData);
                };
            }, []);
            
            // Ïò®ÎùºÏù∏/Ïò§ÌîÑÎùºÏù∏ ÏÉÅÌÉú Í∞êÏßÄ
            useEffect(() => {
                const handleOnline = () => setIsOnline(true);
                const handleOffline = () => setIsOnline(false);
                
                window.addEventListener('online', handleOnline);
                window.addEventListener('offline', handleOffline);
                
                return () => {
                    window.removeEventListener('online', handleOnline);
                    window.removeEventListener('offline', handleOffline);
                };
            }, []);
            
            // ÏòàÏïΩ ÌÇ§ ÏÉùÏÑ±
            const getReservationKey = (date, table, mealTime) => {
                return `${date.toDateString()}-${table}-${mealTime}`;
            };
            
            // ÌòÑÏû¨ ÎÇ†ÏßúÏùò ÏòàÏïΩ Î™©Î°ù (ÏãúÍ∞ÑÏàú Ï†ïÎ†¨)
            const currentReservations = useMemo(() => {
                const filtered = Object.entries(reservations)
                    .filter(([key, res]) => 
                        res.date === currentDate.toDateString() && 
                        res.mealTime === mealTime
                    )
                    .map(([key, res]) => ({ ...res, key }));
                
                // ÏãúÍ∞ÑÏàú Ï†ïÎ†¨
                return filtered.sort((a, b) => {
                    if (!a.time || !b.time) return 0;
                    
                    // ÏãúÍ∞ÑÏùÑ Î∂ÑÏúºÎ°ú Î≥ÄÌôòÌïòÏó¨ ÎπÑÍµê
                    const timeToMinutes = (time) => {
                        const [h, m] = time.split(':').map(Number);
                        return h * 60 + m;
                    };
                    
                    return timeToMinutes(a.time) - timeToMinutes(b.time);
                });
            }, [reservations, currentDate, mealTime]);
            
            // ÏòàÏïΩ Ï∂îÍ∞Ä/ÏàòÏ†ï
            const handleSubmit = async (e) => {
                e.preventDefault();
                
                if (!formData.table || !formData.name || !formData.phone || !formData.people || !formData.time) {
                    alert('ÌïÑÏàò Ï†ïÎ≥¥Î•º Î™®Îëê ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                    return;
                }
                
                const key = getReservationKey(currentDate, formData.table, mealTime);
                const reservationData = {
                    ...formData,
                    date: currentDate.toDateString(),
                    mealTime: mealTime,
                    noShow: selectedReservation?.noShow || false,
                    createdAt: selectedReservation?.createdAt || new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                
                try {
                    await database.ref(`reservations/${key}`).set(reservationData);
                    setShowForm(false);
                    setSelectedReservation(null);
                    setFormData({
                        table: '',
                        name: '',
                        phone: '',
                        people: '',
                        time: '',
                        memo: ''
                    });
                    alert(selectedReservation ? 'ÏòàÏïΩÏù¥ ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§.' : 'ÏòàÏïΩÏù¥ Îì±Î°ùÎêòÏóàÏäµÎãàÎã§.');
                } catch (error) {
                    console.error('ÏòàÏïΩ Ï†ÄÏû• Ïã§Ìå®:', error);
                    alert('ÏòàÏïΩ Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
                }
            };
            
            // ÏòàÏïΩ ÏÇ≠Ï†ú
            const handleDelete = async (reservation) => {
                if (!confirm('ÏòàÏïΩÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) return;
                
                const key = getReservationKey(currentDate, reservation.table, mealTime);
                
                try {
                    await database.ref(`reservations/${key}`).remove();
                    alert('ÏòàÏïΩÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.');
                } catch (error) {
                    console.error('ÏòàÏïΩ ÏÇ≠Ï†ú Ïã§Ìå®:', error);
                    alert('ÏòàÏïΩ ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
                }
            };
            
            // ÎÖ∏Ïáº ÌÜ†Í∏Ä
            const handleNoShow = async (reservation) => {
                const key = getReservationKey(currentDate, reservation.table, mealTime);
                
                try {
                    await database.ref(`reservations/${key}/noShow`).set(!reservation.noShow);
                } catch (error) {
                    console.error('ÎÖ∏Ïáº ÏÉÅÌÉú Î≥ÄÍ≤Ω Ïã§Ìå®:', error);
                }
            };
            
            // ÏòàÏïΩ Ìé∏Ïßë
            const handleEdit = (reservation) => {
                setSelectedReservation(reservation);
                setFormData({
                    table: reservation.table,
                    name: reservation.name,
                    phone: reservation.phone,
                    people: reservation.people,
                    time: reservation.time,
                    memo: reservation.memo || ''
                });
                setShowForm(true);
            };
            
            // ÏÉà ÏòàÏïΩ Ï∂îÍ∞Ä
            const handleNewReservation = (table = '') => {
                setSelectedReservation(null);
                setFormData({
                    table: table,
                    name: '',
                    phone: '',
                    people: '',
                    time: '',
                    memo: ''
                });
                setShowForm(true);
            };
            
            // ÎÇ†Ïßú Ìè¨Îß∑
            const formatDate = (date) => {
                const year = date.getFullYear();
                const month = date.getMonth() + 1;
                const day = date.getDate();
                const weekDay = ['Ïùº', 'Ïõî', 'Ìôî', 'Ïàò', 'Î™©', 'Í∏à', 'ÌÜ†'][date.getDay()];
                return `${month}Ïõî ${day}Ïùº (${weekDay})`;
            };
            
            // Ï£ºÍ∞Ñ ÎÇ†Ïßú Í∞ÄÏ†∏Ïò§Í∏∞
            const getWeekDates = (date) => {
                const week = [];
                const startOfWeek = new Date(date);
                const day = startOfWeek.getDay();
                const diff = startOfWeek.getDate() - day;
                startOfWeek.setDate(diff);
                
                for (let i = 0; i < 7; i++) {
                    const day = new Date(startOfWeek);
                    day.setDate(startOfWeek.getDate() + i);
                    week.push(day);
                }
                return week;
            };
            
            // Ï£º Î≥ÄÍ≤Ω
            const changeWeek = (weeks) => {
                const newWeek = new Date(currentWeek);
                newWeek.setDate(newWeek.getDate() + (weeks * 7));
                setCurrentWeek(newWeek);
                
                const weekDates = getWeekDates(newWeek);
                const isCurrentDateInNewWeek = weekDates.some(date => 
                    date.toDateString() === currentDate.toDateString()
                );
                if (!isCurrentDateInNewWeek) {
                    setCurrentDate(weekDates[0]);
                }
            };
            
            // Ïò§ÎäòÏù∏ÏßÄ ÌôïÏù∏
            const isToday = (date) => {
                const today = new Date();
                return date.toDateString() === today.toDateString();
            };
            
            // ÏöîÏùº Ïù¥Î¶Ñ Í∞ÄÏ†∏Ïò§Í∏∞
            const getDayName = (date) => {
                const days = ['Ïùº', 'Ïõî', 'Ìôî', 'Ïàò', 'Î™©', 'Í∏à', 'ÌÜ†'];
                return days[date.getDay()];
            };
            
            // ÌÖåÏù¥Î∏îÏù¥ ÏòàÏïΩÎêòÏñ¥ ÏûàÎäîÏßÄ ÌôïÏù∏
            const isTableReserved = (table) => {
                return currentReservations.some(res => res.table === table);
            };
            
            return (
                <div className="min-h-screen bg-gray-50">
                    <div className="max-w-md mx-auto bg-white min-h-screen shadow-lg">
                        {/* Ìó§Îçî */}
                        <div className="bg-blue-600 text-white p-4">
                            <div className="flex justify-between items-center">
                                <h1 className="text-xl font-bold">ÏÜåÎã¥ÏÑúÏö∏ ÏòàÏïΩ Í¥ÄÎ¶¨</h1>
                                <span className={`text-xs px-2 py-1 rounded ${isOnline ? 'bg-green-500' : 'bg-red-500'}`}>
                                    {isOnline ? 'Ïò®ÎùºÏù∏' : 'Ïò§ÌîÑÎùºÏù∏'}
                                </span>
                            </div>
                        </div>
                        
                        {/* Ï£ºÍ∞Ñ Ï∫òÎ¶∞Îçî */}
                        <div className="bg-gray-100 p-3">
                            <div className="flex items-center justify-between mb-3">
                                <button 
                                    onClick={() => changeWeek(-1)}
                                    className="p-1.5 bg-white rounded shadow hover:shadow-md"
                                >
                                    ‚óÄ
                                </button>
                                <h2 className="text-sm font-semibold">
                                    {getWeekDates(currentWeek)[0].getMonth()+1}/{getWeekDates(currentWeek)[0].getDate()} ~ 
                                    {getWeekDates(currentWeek)[6].getMonth()+1}/{getWeekDates(currentWeek)[6].getDate()}
                                </h2>
                                <button 
                                    onClick={() => changeWeek(1)}
                                    className="p-1.5 bg-white rounded shadow hover:shadow-md"
                                >
                                    ‚ñ∂
                                </button>
                            </div>
                            
                            <div className="grid grid-cols-7 gap-1">
                                {getWeekDates(currentWeek).map((date) => (
                                    <button
                                        key={date.toDateString()}
                                        onClick={() => setCurrentDate(date)}
                                        className={`p-2 rounded-lg text-center transition-all ${
                                            date.toDateString() === currentDate.toDateString()
                                                ? 'bg-blue-600 text-white'
                                                : isToday(date)
                                                ? 'bg-yellow-100 hover:bg-yellow-200'
                                                : 'bg-white hover:bg-gray-100'
                                        }`}
                                    >
                                        <div className="text-xs">{getDayName(date)}</div>
                                        <div className="text-sm font-bold">{date.getDate()}</div>
                                    </button>
                                ))}
                            </div>
                        </div>
                        
                        {/* Ï†êÏã¨/Ï†ÄÎÖÅ ÏÑ†ÌÉù */}
                        <div className="p-3">
                            <div className="flex gap-2">
                                <button
                                    onClick={() => setMealTime('lunch')}
                                    className={`flex-1 py-2 rounded font-medium transition ${
                                        mealTime === 'lunch' 
                                            ? 'bg-blue-600 text-white' 
                                            : 'bg-gray-200 text-gray-700'
                                    }`}
                                >
                                    Ï†êÏã¨
                                </button>
                                <button
                                    onClick={() => setMealTime('dinner')}
                                    className={`flex-1 py-2 rounded font-medium transition ${
                                        mealTime === 'dinner' 
                                            ? 'bg-blue-600 text-white' 
                                            : 'bg-gray-200 text-gray-700'
                                    }`}
                                >
                                    Ï†ÄÎÖÅ
                                </button>
                            </div>
                        </div>
                        
                        {/* Î∑∞ Î™®Îìú ÏÑ†ÌÉù & ÏÉà ÏòàÏïΩ Î≤ÑÌäº */}
                        <div className="p-3 flex justify-between items-center">
                            <div className="flex gap-2">
                                <button
                                    onClick={() => setViewMode('list')}
                                    className={`px-3 py-1 rounded text-sm ${
                                        viewMode === 'list' ? 'bg-gray-800 text-white' : 'bg-gray-200'
                                    }`}
                                >
                                    Î¶¨Ïä§Ìä∏
                                </button>
                                <button
                                    onClick={() => setViewMode('grid')}
                                    className={`px-3 py-1 rounded text-sm ${
                                        viewMode === 'grid' ? 'bg-gray-800 text-white' : 'bg-gray-200'
                                    }`}
                                >
                                    ÌÖåÏù¥Î∏î
                                </button>
                            </div>
                            
                            <button
                                onClick={() => handleNewReservation()}
                                className="bg-blue-600 text-white px-4 py-1 rounded text-sm hover:bg-blue-700"
                            >
                                + ÏÉà ÏòàÏïΩ
                            </button>
                        </div>
                        
                        {/* ÏòàÏïΩ ÏöîÏïΩ */}
                        <div className="px-3 pb-3">
                            <div className="bg-blue-50 p-3 rounded-lg text-sm">
                                <div className="flex justify-between">
                                    <span>Ï¥ù ÏòàÏïΩ: <strong>{currentReservations.length}Í∞ú</strong></span>
                                    <span>ÏòàÏïΩ Í∞ÄÎä•: <strong>{17 - currentReservations.length}Í∞ú</strong></span>
                                </div>
                            </div>
                        </div>
                        
                        {/* Ïª®ÌÖêÏ∏† ÏòÅÏó≠ */}
                        <div className="px-3 pb-3">
                            {viewMode === 'list' ? (
                                /* Î¶¨Ïä§Ìä∏ Î∑∞ */
                                <div className="space-y-2">
                                    {currentReservations.length === 0 ? (
                                        <div className="text-center py-8 text-gray-500">
                                            ÏòàÏïΩÏù¥ ÏóÜÏäµÎãàÎã§
                                        </div>
                                    ) : (
                                        currentReservations.map((reservation) => (
                                            <div 
                                                key={reservation.key}
                                                className={`bg-white border rounded-lg p-3 ${
                                                    reservation.noShow ? 'border-red-300 bg-red-50' : 'border-gray-200'
                                                }`}
                                            >
                                                <div className="flex justify-between items-start">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-3 mb-1">
                                                            <span className="font-bold text-lg">{reservation.time}</span>
                                                            <span className="bg-gray-100 px-2 py-1 rounded text-sm">
                                                                {reservation.table}
                                                            </span>
                                                            {reservation.noShow && (
                                                                <span className="bg-red-500 text-white px-2 py-1 rounded text-xs">
                                                                    ÎÖ∏Ïáº
                                                                </span>
                                                            )}
                                                        </div>
                                                        <div className="text-sm text-gray-600">
                                                            <div>{reservation.name} ¬∑ {reservation.phone}</div>
                                                            <div>{reservation.people}Î™Ö</div>
                                                            {reservation.memo && (
                                                                <div className="mt-1 text-xs bg-yellow-100 p-1 rounded">
                                                                    üìù {reservation.memo}
                                                                </div>
                                                            )}
                                                        </div>
                                                    </div>
                                                    <div className="flex gap-1">
                                                        <button
                                                            onClick={() => handleEdit(reservation)}
                                                            className="p-1.5 text-blue-600 hover:bg-blue-50 rounded"
                                                        >
                                                            ‚úèÔ∏è
                                                        </button>
                                                        <button
                                                            onClick={() => handleNoShow(reservation)}
                                                            className="p-1.5 text-yellow-600 hover:bg-yellow-50 rounded"
                                                        >
                                                            ‚ö†Ô∏è
                                                        </button>
                                                        <button
                                                            onClick={() => handleDelete(reservation)}
                                                            className="p-1.5 text-red-600 hover:bg-red-50 rounded"
                                                        >
                                                            üóëÔ∏è
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            ) : (
                                /* Í∑∏Î¶¨Îìú Î∑∞ */
                                <div className="space-y-4">
                                    {/* Room */}
                                    <div>
                                        <h3 className="font-semibold text-sm mb-2">Room (10Ïù∏)</h3>
                                        <div className="grid grid-cols-3 gap-2">
                                            {tables.room.map(table => (
                                                <button
                                                    key={table}
                                                    onClick={() => handleNewReservation(table)}
                                                    className={`p-3 rounded-lg text-center transition ${
                                                        isTableReserved(table)
                                                            ? 'bg-red-500 text-white'
                                                            : 'bg-green-100 hover:bg-green-200'
                                                    }`}
                                                >
                                                    <div className="font-semibold">{table}</div>
                                                    {currentReservations.find(r => r.table === table) && (
                                                        <div className="text-xs mt-1">
                                                            {currentReservations.find(r => r.table === table).time}
                                                        </div>
                                                    )}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                    
                                    {/* 2Ï∏µ */}
                                    <div>
                                        <h3 className="font-semibold text-sm mb-2">2Ï∏µ</h3>
                                        <div className="space-y-2">
                                            <div>
                                                <div className="text-xs text-gray-600 mb-1">2A (4Ïù∏ÏÑù)</div>
                                                <div className="grid grid-cols-4 gap-2">
                                                    {tables.floor2.A.map(table => (
                                                        <button
                                                            key={table}
                                                            onClick={() => handleNewReservation(table)}
                                                            className={`p-2 rounded text-xs transition ${
                                                                isTableReserved(table)
                                                                    ? 'bg-red-500 text-white'
                                                                    : 'bg-green-100 hover:bg-green-200'
                                                            }`}
                                                        >
                                                            {table}
                                                        </button>
                                                    ))}
                                                </div>
                                            </div>
                                            <div>
                                                <div className="text-xs text-gray-600 mb-1">2B (6Ïù∏ÏÑù)</div>
                                                <div className="grid grid-cols-4 gap-2">
                                                    {tables.floor2.B.map(table => (
                                                        <button
                                                            key={table}
                                                            onClick={() => handleNewReservation(table)}
                                                            className={`p-2 rounded text-xs transition ${
                                                                isTableReserved(table)
                                                                    ? 'bg-red-500 text-white'
                                                                    : 'bg-green-100 hover:bg-green-200'
                                                            }`}
                                                        >
                                                            {table}
                                                        </button>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    {/* 3Ï∏µ */}
                                    <div>
                                        <h3 className="font-semibold text-sm mb-2">3Ï∏µ</h3>
                                        <div className="space-y-2">
                                            <div>
                                                <div className="text-xs text-gray-600 mb-1">3A (4Ïù∏ÏÑù)</div>
                                                <div className="grid grid-cols-4 gap-2">
                                                    {tables.floor3.A.map(table => (
                                                        <button
                                                            key={table}
                                                            onClick={() => handleNewReservation(table)}
                                                            className={`p-2 rounded text-xs transition ${
                                                                isTableReserved(table)
                                                                    ? 'bg-red-500 text-white'
                                                                    : 'bg-green-100 hover:bg-green-200'
                                                            }`}
                                                        >
                                                            {table}
                                                        </button>
                                                    ))}
                                                </div>
                                            </div>
                                            <div>
                                                <div className="text-xs text-gray-600 mb-1">3B (6Ïù∏ÏÑù)</div>
                                                <div className="grid grid-cols-4 gap-2">
                                                    {tables.floor3.B.map(table => (
                                                        <button
                                                            key={table}
                                                            onClick={() => handleNewReservation(table)}
                                                            className={`p-2 rounded text-xs transition ${
                                                                isTableReserved(table)
                                                                    ? 'bg-red-500 text-white'
                                                                    : 'bg-green-100 hover:bg-green-200'
                                                            }`}
                                                        >
                                                            {table}
                                                        </button>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                        
                        {/* ÏòàÏïΩ Ìèº Î™®Îã¨ */}
                        {showForm && (
                            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-end z-50">
                                <div className="bg-white w-full rounded-t-2xl p-4 slide-up">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="text-lg font-semibold">
                                            {selectedReservation ? 'ÏòàÏïΩ ÏàòÏ†ï' : 'ÏÉà ÏòàÏïΩ'}
                                        </h3>
                                        <button
                                            onClick={() => setShowForm(false)}
                                            className="text-gray-500 text-2xl"
                                        >
                                            √ó
                                        </button>
                                    </div>
                                    
                                    <form onSubmit={handleSubmit} className="space-y-3">
                                        <div>
                                            <label className="block text-sm font-medium mb-1">ÌÖåÏù¥Î∏î *</label>
                                            <select
                                                value={formData.table}
                                                onChange={(e) => setFormData({...formData, table: e.target.value})}
                                                className="w-full border rounded px-3 py-2"
                                                required
                                            >
                                                <option value="">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                                                <optgroup label="Room (10Ïù∏)">
                                                    {tables.room.map(t => (
                                                        <option key={t} value={t} disabled={isTableReserved(t) && t !== selectedReservation?.table}>
                                                            {t} {isTableReserved(t) && t !== selectedReservation?.table && '(ÏòàÏïΩÎê®)'}
                                                        </option>
                                                    ))}
                                                </optgroup>
                                                <optgroup label="2Ï∏µ (4Ïù∏)">
                                                    {tables.floor2.A.map(t => (
                                                        <option key={t} value={t} disabled={isTableReserved(t) && t !== selectedReservation?.table}>
                                                            {t} {isTableReserved(t) && t !== selectedReservation?.table && '(ÏòàÏïΩÎê®)'}
                                                        </option>
                                                    ))}
                                                </optgroup>
                                                <optgroup label="2Ï∏µ (6Ïù∏)">
                                                    {tables.floor2.B.map(t => (
                                                        <option key={t} value={t} disabled={isTableReserved(t) && t !== selectedReservation?.table}>
                                                            {t} {isTableReserved(t) && t !== selectedReservation?.table && '(ÏòàÏïΩÎê®)'}
                                                        </option>
                                                    ))}
                                                </optgroup>
                                                <optgroup label="3Ï∏µ (4Ïù∏)">
                                                    {tables.floor3.A.map(t => (
                                                        <option key={t} value={t} disabled={isTableReserved(t) && t !== selectedReservation?.table}>
                                                            {t} {isTableReserved(t) && t !== selectedReservation?.table && '(ÏòàÏïΩÎê®)'}
                                                        </option>
                                                    ))}
                                                </optgroup>
                                                <optgroup label="3Ï∏µ (6Ïù∏)">
                                                    {tables.floor3.B.map(t => (
                                                        <option key={t} value={t} disabled={isTableReserved(t) && t !== selectedReservation?.table}>
                                                            {t} {isTableReserved(t) && t !== selectedReservation?.table && '(ÏòàÏïΩÎê®)'}
                                                        </option>
                                                    ))}
                                                </optgroup>
                                            </select>
                                        </div>
                                        
                                        <div className="grid grid-cols-2 gap-3">
                                            <div>
                                                <label className="block text-sm font-medium mb-1">ÏòàÏïΩÏûêÎ™Ö *</label>
                                                <input
                                                    type="text"
                                                    value={formData.name}
                                                    onChange={(e) => setFormData({...formData, name: e.target.value})}
                                                    className="w-full border rounded px-3 py-2"
                                                    required
                                                />
                                            </div>
                                            
                                            <div>
                                                <label className="block text-sm font-medium mb-1">Ïó∞ÎùΩÏ≤ò *</label>
                                                <input
                                                    type="tel"
                                                    value={formData.phone}
                                                    onChange={(e) => setFormData({...formData, phone: e.target.value})}
                                                    className="w-full border rounded px-3 py-2"
                                                    placeholder="010-0000-0000"
                                                    required
                                                />
                                            </div>
                                        </div>
                                        
                                        <div className="grid grid-cols-2 gap-3">
                                            <div>
                                                <label className="block text-sm font-medium mb-1">
                                                    Ïù∏Ïõê * {formData.table && `(ÏµúÎåÄ ${getTableCapacity(formData.table)}Î™Ö)`}
                                                </label>
                                                <input
                                                    type="number"
                                                    value={formData.people}
                                                    onChange={(e) => setFormData({...formData, people: e.target.value})}
                                                    className="w-full border rounded px-3 py-2"
                                                    min="1"
                                                    max={formData.table ? getTableCapacity(formData.table) : 10}
                                                    required
                                                />
                                            </div>
                                            
                                            <div>
                                                <label className="block text-sm font-medium mb-1">ÏãúÍ∞Ñ *</label>
                                                <select
                                                    value={formData.time}
                                                    onChange={(e) => setFormData({...formData, time: e.target.value})}
                                                    className="w-full border rounded px-3 py-2"
                                                    required
                                                >
                                                    <option value="">ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                                                    {getTimeSlots().map(time => (
                                                        <option key={time} value={time}>{time}</option>
                                                    ))}
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <label className="block text-sm font-medium mb-1">Î©îÎ™®</label>
                                            <textarea
                                                value={formData.memo}
                                                onChange={(e) => setFormData({...formData, memo: e.target.value})}
                                                className="w-full border rounded px-3 py-2"
                                                rows="2"
                                                placeholder="ÌäπÎ≥Ñ ÏöîÏ≤≠ÏÇ¨Ìï≠"
                                            />
                                        </div>
                                        
                                        <div className="flex gap-2 pt-2">
                                            <button
                                                type="button"
                                                onClick={() => setShowForm(false)}
                                                className="flex-1 py-2 border border-gray-300 rounded text-gray-700"
                                            >
                                                Ï∑®ÏÜå
                                            </button>
                                            <button
                                                type="submit"
                                                className="flex-1 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
                                            >
                                                {selectedReservation ? 'ÏàòÏ†ï' : 'Îì±Î°ù'}
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }
        
        // Ïï± Î†åÎçîÎßÅ
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
