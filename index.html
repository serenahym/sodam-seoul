<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>소담서울 예약 관리 v2</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#3B82F6">
    
    <!-- React & Babel -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <style>
        /* 커스텀 스타일 */
        body {
            overscroll-behavior: contain;
        }
        
        /* 모바일 탭 하이라이트 제거 */
        * {
            -webkit-tap-highlight-color: transparent;
        }
        
        /* 슬라이드 애니메이션 */
        @keyframes slideUp {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .slide-up {
            animation: slideUp 0.3s ease-out;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        
        // Firebase 설정
        const firebaseConfig = {
            apiKey: "AIzaSyDirTw6VCHrbTsx4qit7kBMqAO2E7K5Rls",
            authDomain: "sodam-seoul.firebaseapp.com",
            databaseURL: "https://sodam-seoul-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "sodam-seoul",
            storageBucket: "sodam-seoul.firebasestorage.app",
            messagingSenderId: "789780946324",
            appId: "1:789780946324:web:e3f9e10ef6b6a1d36a4381"
        };
        
        // Firebase 초기화
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // 메인 앱 컴포넌트
        function App() {
            // 상태 관리
            const [currentDate, setCurrentDate] = useState(new Date());
            const [mealTime, setMealTime] = useState('lunch');
            const [viewMode, setViewMode] = useState('list'); // 기본값을 list로 변경
            const [reservations, setReservations] = useState({});
            const [selectedReservation, setSelectedReservation] = useState(null);
            const [showForm, setShowForm] = useState(false);
            const [isOnline, setIsOnline] = useState(navigator.onLine);
            const [currentWeek, setCurrentWeek] = useState(new Date());
            
            // 폼 데이터
            const [formData, setFormData] = useState({
                table: '',
                name: '',
                phone: '',
                people: '',
                time: '',
                memo: ''
            });
            
            // 테이블 정보
            const tables = {
                room: ['1A', '4A', '4B'],
                floor2: {
                    A: ['2A1', '2A2', '2A3'],
                    B: ['2B1', '2B2', '2B3', '2B4']
                },
                floor3: {
                    A: ['3A1', '3A2', '3A3'],
                    B: ['3B1', '3B2', '3B3', '3B4']
                }
            };
            
            // 테이블 수용 인원
            const getTableCapacity = (tableId) => {
                if (['1A', '4A', '4B'].includes(tableId)) return 10;
                if (tableId.includes('A')) return 4;
                if (tableId.includes('B')) return 6;
                return 4;
            };
            
            // 시간 옵션 생성
            const getTimeSlots = () => {
                const isSaturday = currentDate.getDay() === 6;
                
                if (isSaturday) {
                    if (mealTime === 'lunch') {
                        return generateTimeSlots('12:00', '16:50', 10);
                    } else {
                        return generateTimeSlots('17:00', '21:50', 10);
                    }
                } else {
                    if (mealTime === 'lunch') {
                        return generateTimeSlots('11:30', '14:30', 10);
                    } else {
                        return generateTimeSlots('17:30', '21:00', 10);
                    }
                }
            };
            
            // 시간 슬롯 생성 헬퍼 함수
            const generateTimeSlots = (start, end, interval) => {
                const slots = [];
                const [startHour, startMin] = start.split(':').map(Number);
                const [endHour, endMin] = end.split(':').map(Number);
                
                let currentHour = startHour;
                let currentMin = startMin;
                
                while (currentHour < endHour || (currentHour === endHour && currentMin <= endMin)) {
                    slots.push(`${currentHour.toString().padStart(2, '0')}:${currentMin.toString().padStart(2, '0')}`);
                    
                    currentMin += interval;
                    if (currentMin >= 60) {
                        currentHour += Math.floor(currentMin / 60);
                        currentMin = currentMin % 60;
                    }
                }
                
                return slots;
            };
            
            // Firebase 실시간 동기화
            useEffect(() => {
                const reservationsRef = database.ref('reservations');
                
                const handleData = (snapshot) => {
                    const data = snapshot.val() || {};
                    setReservations(data);
                };
                
                reservationsRef.on('value', handleData);
                
                return () => {
                    reservationsRef.off('value', handleData);
                };
            }, []);
            
            // 온라인/오프라인 상태 감지
            useEffect(() => {
                const handleOnline = () => setIsOnline(true);
                const handleOffline = () => setIsOnline(false);
                
                window.addEventListener('online', handleOnline);
                window.addEventListener('offline', handleOffline);
                
                return () => {
                    window.removeEventListener('online', handleOnline);
                    window.removeEventListener('offline', handleOffline);
                };
            }, []);
            
            // 예약 키 생성
            const getReservationKey = (date, table, mealTime) => {
                return `${date.toDateString()}-${table}-${mealTime}`;
            };
            
            // 현재 날짜의 예약 목록 (시간순 정렬)
            const currentReservations = useMemo(() => {
                const filtered = Object.entries(reservations)
                    .filter(([key, res]) => 
                        res.date === currentDate.toDateString() && 
                        res.mealTime === mealTime
                    )
                    .map(([key, res]) => ({ ...res, key }));
                
                // 시간순 정렬
                return filtered.sort((a, b) => {
                    if (!a.time || !b.time) return 0;
                    
                    // 시간을 분으로 변환하여 비교
                    const timeToMinutes = (time) => {
                        const [h, m] = time.split(':').map(Number);
                        return h * 60 + m;
                    };
                    
                    return timeToMinutes(a.time) - timeToMinutes(b.time);
                });
            }, [reservations, currentDate, mealTime]);
            
            // 예약 추가/수정
            const handleSubmit = async (e) => {
                e.preventDefault();
                
                if (!formData.table || !formData.name || !formData.phone || !formData.people || !formData.time) {
                    alert('필수 정보를 모두 입력해주세요.');
                    return;
                }
                
                const key = getReservationKey(currentDate, formData.table, mealTime);
                const reservationData = {
                    ...formData,
                    date: currentDate.toDateString(),
                    mealTime: mealTime,
                    noShow: selectedReservation?.noShow || false,
                    createdAt: selectedReservation?.createdAt || new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                
                try {
                    await database.ref(`reservations/${key}`).set(reservationData);
                    setShowForm(false);
                    setSelectedReservation(null);
                    setFormData({
                        table: '',
                        name: '',
                        phone: '',
                        people: '',
                        time: '',
                        memo: ''
                    });
                    alert(selectedReservation ? '예약이 수정되었습니다.' : '예약이 등록되었습니다.');
                } catch (error) {
                    console.error('예약 저장 실패:', error);
                    alert('예약 저장에 실패했습니다.');
                }
            };
            
            // 예약 삭제
            const handleDelete = async (reservation) => {
                if (!confirm('예약을 삭제하시겠습니까?')) return;
                
                const key = getReservationKey(currentDate, reservation.table, mealTime);
                
                try {
                    await database.ref(`reservations/${key}`).remove();
                    alert('예약이 삭제되었습니다.');
                } catch (error) {
                    console.error('예약 삭제 실패:', error);
                    alert('예약 삭제에 실패했습니다.');
                }
            };
            
            // 노쇼 토글
            const handleNoShow = async (reservation) => {
                const key = getReservationKey(currentDate, reservation.table, mealTime);
                
                try {
                    await database.ref(`reservations/${key}/noShow`).set(!reservation.noShow);
                } catch (error) {
                    console.error('노쇼 상태 변경 실패:', error);
                }
            };
            
            // 예약 편집
            const handleEdit = (reservation) => {
                setSelectedReservation(reservation);
                setFormData({
                    table: reservation.table,
                    name: reservation.name,
                    phone: reservation.phone,
                    people: reservation.people,
                    time: reservation.time,
                    memo: reservation.memo || ''
                });
                setShowForm(true);
            };
            
            // 새 예약 추가
            const handleNewReservation = (table = '') => {
                setSelectedReservation(null);
                setFormData({
                    table: table,
                    name: '',
                    phone: '',
                    people: '',
                    time: '',
                    memo: ''
                });
                setShowForm(true);
            };
            
            // 날짜 포맷
            const formatDate = (date) => {
                const year = date.getFullYear();
                const month = date.getMonth() + 1;
                const day = date.getDate();
                const weekDay = ['일', '월', '화', '수', '목', '금', '토'][date.getDay()];
                return `${month}월 ${day}일 (${weekDay})`;
            };
            
            // 주간 날짜 가져오기
            const getWeekDates = (date) => {
                const week = [];
                const startOfWeek = new Date(date);
                const day = startOfWeek.getDay();
                const diff = startOfWeek.getDate() - day;
                startOfWeek.setDate(diff);
                
                for (let i = 0; i < 7; i++) {
                    const day = new Date(startOfWeek);
                    day.setDate(startOfWeek.getDate() + i);
                    week.push(day);
                }
                return week;
            };
            
            // 주 변경
            const changeWeek = (weeks) => {
                const newWeek = new Date(currentWeek);
                newWeek.setDate(newWeek.getDate() + (weeks * 7));
                setCurrentWeek(newWeek);
                
                const weekDates = getWeekDates(newWeek);
                const isCurrentDateInNewWeek = weekDates.some(date => 
                    date.toDateString() === currentDate.toDateString()
                );
                if (!isCurrentDateInNewWeek) {
                    setCurrentDate(weekDates[0]);
                }
            };
            
            // 오늘인지 확인
            const isToday = (date) => {
                const today = new Date();
                return date.toDateString() === today.toDateString();
            };
            
            // 요일 이름 가져오기
            const getDayName = (date) => {
                const days = ['일', '월', '화', '수', '목', '금', '토'];
                return days[date.getDay()];
            };
            
            // 테이블이 예약되어 있는지 확인
            const isTableReserved = (table) => {
                return currentReservations.some(res => res.table === table);
            };
            
            return (
                <div className="min-h-screen bg-gray-50">
                    <div className="max-w-md mx-auto bg-white min-h-screen shadow-lg">
                        {/* 헤더 */}
                        <div className="bg-blue-600 text-white p-4">
                            <div className="flex justify-between items-center">
                                <h1 className="text-xl font-bold">소담서울 예약 관리</h1>
                                <span className={`text-xs px-2 py-1 rounded ${isOnline ? 'bg-green-500' : 'bg-red-500'}`}>
                                    {isOnline ? '온라인' : '오프라인'}
                                </span>
                            </div>
                        </div>
                        
                        {/* 주간 캘린더 */}
                        <div className="bg-gray-100 p-3">
                            <div className="flex items-center justify-between mb-3">
                                <button 
                                    onClick={() => changeWeek(-1)}
                                    className="p-1.5 bg-white rounded shadow hover:shadow-md"
                                >
                                    ◀
                                </button>
                                <h2 className="text-sm font-semibold">
                                    {getWeekDates(currentWeek)[0].getMonth()+1}/{getWeekDates(currentWeek)[0].getDate()} ~ 
                                    {getWeekDates(currentWeek)[6].getMonth()+1}/{getWeekDates(currentWeek)[6].getDate()}
                                </h2>
                                <button 
                                    onClick={() => changeWeek(1)}
                                    className="p-1.5 bg-white rounded shadow hover:shadow-md"
                                >
                                    ▶
                                </button>
                            </div>
                            
                            <div className="grid grid-cols-7 gap-1">
                                {getWeekDates(currentWeek).map((date) => (
                                    <button
                                        key={date.toDateString()}
                                        onClick={() => setCurrentDate(date)}
                                        className={`p-2 rounded-lg text-center transition-all ${
                                            date.toDateString() === currentDate.toDateString()
                                                ? 'bg-blue-600 text-white'
                                                : isToday(date)
                                                ? 'bg-yellow-100 hover:bg-yellow-200'
                                                : 'bg-white hover:bg-gray-100'
                                        }`}
                                    >
                                        <div className="text-xs">{getDayName(date)}</div>
                                        <div className="text-sm font-bold">{date.getDate()}</div>
                                    </button>
                                ))}
                            </div>
                        </div>
                        
                        {/* 점심/저녁 선택 */}
                        <div className="p-3">
                            <div className="flex gap-2">
                                <button
                                    onClick={() => setMealTime('lunch')}
                                    className={`flex-1 py-2 rounded font-medium transition ${
                                        mealTime === 'lunch' 
                                            ? 'bg-blue-600 text-white' 
                                            : 'bg-gray-200 text-gray-700'
                                    }`}
                                >
                                    점심
                                </button>
                                <button
                                    onClick={() => setMealTime('dinner')}
                                    className={`flex-1 py-2 rounded font-medium transition ${
                                        mealTime === 'dinner' 
                                            ? 'bg-blue-600 text-white' 
                                            : 'bg-gray-200 text-gray-700'
                                    }`}
                                >
                                    저녁
                                </button>
                            </div>
                        </div>
                        
                        {/* 뷰 모드 선택 & 새 예약 버튼 */}
                        <div className="p-3 flex justify-between items-center">
                            <div className="flex gap-2">
                                <button
                                    onClick={() => setViewMode('list')}
                                    className={`px-3 py-1 rounded text-sm ${
                                        viewMode === 'list' ? 'bg-gray-800 text-white' : 'bg-gray-200'
                                    }`}
                                >
                                    리스트
                                </button>
                                <button
                                    onClick={() => setViewMode('grid')}
                                    className={`px-3 py-1 rounded text-sm ${
                                        viewMode === 'grid' ? 'bg-gray-800 text-white' : 'bg-gray-200'
                                    }`}
                                >
                                    테이블
                                </button>
                            </div>
                            
                            <button
                                onClick={() => handleNewReservation()}
                                className="bg-blue-600 text-white px-4 py-1 rounded text-sm hover:bg-blue-700"
                            >
                                + 새 예약
                            </button>
                        </div>
                        
                        {/* 예약 요약 */}
                        <div className="px-3 pb-3">
                            <div className="bg-blue-50 p-3 rounded-lg text-sm">
                                <div className="flex justify-between">
                                    <span>총 예약: <strong>{currentReservations.length}개</strong></span>
                                    <span>예약 가능: <strong>{17 - currentReservations.length}개</strong></span>
                                </div>
                            </div>
                        </div>
                        
                        {/* 컨텐츠 영역 */}
                        <div className="px-3 pb-3">
                            {viewMode === 'list' ? (
                                /* 리스트 뷰 */
                                <div className="space-y-2">
                                    {currentReservations.length === 0 ? (
                                        <div className="text-center py-8 text-gray-500">
                                            예약이 없습니다
                                        </div>
                                    ) : (
                                        currentReservations.map((reservation) => (
                                            <div 
                                                key={reservation.key}
                                                className={`bg-white border rounded-lg p-3 ${
                                                    reservation.noShow ? 'border-red-300 bg-red-50' : 'border-gray-200'
                                                }`}
                                            >
                                                <div className="flex justify-between items-start">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-3 mb-1">
                                                            <span className="font-bold text-lg">{reservation.time}</span>
                                                            <span className="bg-gray-100 px-2 py-1 rounded text-sm">
                                                                {reservation.table}
                                                            </span>
                                                            {reservation.noShow && (
                                                                <span className="bg-red-500 text-white px-2 py-1 rounded text-xs">
                                                                    노쇼
                                                                </span>
                                                            )}
                                                        </div>
                                                        <div className="text-sm text-gray-600">
                                                            <div>{reservation.name} · {reservation.phone}</div>
                                                            <div>{reservation.people}명</div>
                                                            {reservation.memo && (
                                                                <div className="mt-1 text-xs bg-yellow-100 p-1 rounded">
                                                                    📝 {reservation.memo}
                                                                </div>
                                                            )}
                                                        </div>
                                                    </div>
                                                    <div className="flex gap-1">
                                                        <button
                                                            onClick={() => handleEdit(reservation)}
                                                            className="p-1.5 text-blue-600 hover:bg-blue-50 rounded"
                                                        >
                                                            ✏️
                                                        </button>
                                                        <button
                                                            onClick={() => handleNoShow(reservation)}
                                                            className="p-1.5 text-yellow-600 hover:bg-yellow-50 rounded"
                                                        >
                                                            ⚠️
                                                        </button>
                                                        <button
                                                            onClick={() => handleDelete(reservation)}
                                                            className="p-1.5 text-red-600 hover:bg-red-50 rounded"
                                                        >
                                                            🗑️
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            ) : (
                                /* 그리드 뷰 */
                                <div className="space-y-4">
                                    {/* Room */}
                                    <div>
                                        <h3 className="font-semibold text-sm mb-2">Room (10인)</h3>
                                        <div className="grid grid-cols-3 gap-2">
                                            {tables.room.map(table => (
                                                <button
                                                    key={table}
                                                    onClick={() => handleNewReservation(table)}
                                                    className={`p-3 rounded-lg text-center transition ${
                                                        isTableReserved(table)
                                                            ? 'bg-red-500 text-white'
                                                            : 'bg-green-100 hover:bg-green-200'
                                                    }`}
                                                >
                                                    <div className="font-semibold">{table}</div>
                                                    {currentReservations.find(r => r.table === table) && (
                                                        <div className="text-xs mt-1">
                                                            {currentReservations.find(r => r.table === table).time}
                                                        </div>
                                                    )}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                    
                                    {/* 2층 */}
                                    <div>
                                        <h3 className="font-semibold text-sm mb-2">2층</h3>
                                        <div className="space-y-2">
                                            <div>
                                                <div className="text-xs text-gray-600 mb-1">2A (4인석)</div>
                                                <div className="grid grid-cols-4 gap-2">
                                                    {tables.floor2.A.map(table => (
                                                        <button
                                                            key={table}
                                                            onClick={() => handleNewReservation(table)}
                                                            className={`p-2 rounded text-xs transition ${
                                                                isTableReserved(table)
                                                                    ? 'bg-red-500 text-white'
                                                                    : 'bg-green-100 hover:bg-green-200'
                                                            }`}
                                                        >
                                                            {table}
                                                        </button>
                                                    ))}
                                                </div>
                                            </div>
                                            <div>
                                                <div className="text-xs text-gray-600 mb-1">2B (6인석)</div>
                                                <div className="grid grid-cols-4 gap-2">
                                                    {tables.floor2.B.map(table => (
                                                        <button
                                                            key={table}
                                                            onClick={() => handleNewReservation(table)}
                                                            className={`p-2 rounded text-xs transition ${
                                                                isTableReserved(table)
                                                                    ? 'bg-red-500 text-white'
                                                                    : 'bg-green-100 hover:bg-green-200'
                                                            }`}
                                                        >
                                                            {table}
                                                        </button>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    {/* 3층 */}
                                    <div>
                                        <h3 className="font-semibold text-sm mb-2">3층</h3>
                                        <div className="space-y-2">
                                            <div>
                                                <div className="text-xs text-gray-600 mb-1">3A (4인석)</div>
                                                <div className="grid grid-cols-4 gap-2">
                                                    {tables.floor3.A.map(table => (
                                                        <button
                                                            key={table}
                                                            onClick={() => handleNewReservation(table)}
                                                            className={`p-2 rounded text-xs transition ${
                                                                isTableReserved(table)
                                                                    ? 'bg-red-500 text-white'
                                                                    : 'bg-green-100 hover:bg-green-200'
                                                            }`}
                                                        >
                                                            {table}
                                                        </button>
                                                    ))}
                                                </div>
                                            </div>
                                            <div>
                                                <div className="text-xs text-gray-600 mb-1">3B (6인석)</div>
                                                <div className="grid grid-cols-4 gap-2">
                                                    {tables.floor3.B.map(table => (
                                                        <button
                                                            key={table}
                                                            onClick={() => handleNewReservation(table)}
                                                            className={`p-2 rounded text-xs transition ${
                                                                isTableReserved(table)
                                                                    ? 'bg-red-500 text-white'
                                                                    : 'bg-green-100 hover:bg-green-200'
                                                            }`}
                                                        >
                                                            {table}
                                                        </button>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                        
                        {/* 예약 폼 모달 */}
                        {showForm && (
                            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-end z-50">
                                <div className="bg-white w-full rounded-t-2xl p-4 slide-up">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="text-lg font-semibold">
                                            {selectedReservation ? '예약 수정' : '새 예약'}
                                        </h3>
                                        <button
                                            onClick={() => setShowForm(false)}
                                            className="text-gray-500 text-2xl"
                                        >
                                            ×
                                        </button>
                                    </div>
                                    
                                    <form onSubmit={handleSubmit} className="space-y-3">
                                        <div>
                                            <label className="block text-sm font-medium mb-1">테이블 *</label>
                                            <select
                                                value={formData.table}
                                                onChange={(e) => setFormData({...formData, table: e.target.value})}
                                                className="w-full border rounded px-3 py-2"
                                                required
                                            >
                                                <option value="">선택하세요</option>
                                                <optgroup label="Room (10인)">
                                                    {tables.room.map(t => (
                                                        <option key={t} value={t} disabled={isTableReserved(t) && t !== selectedReservation?.table}>
                                                            {t} {isTableReserved(t) && t !== selectedReservation?.table && '(예약됨)'}
                                                        </option>
                                                    ))}
                                                </optgroup>
                                                <optgroup label="2층 (4인)">
                                                    {tables.floor2.A.map(t => (
                                                        <option key={t} value={t} disabled={isTableReserved(t) && t !== selectedReservation?.table}>
                                                            {t} {isTableReserved(t) && t !== selectedReservation?.table && '(예약됨)'}
                                                        </option>
                                                    ))}
                                                </optgroup>
                                                <optgroup label="2층 (6인)">
                                                    {tables.floor2.B.map(t => (
                                                        <option key={t} value={t} disabled={isTableReserved(t) && t !== selectedReservation?.table}>
                                                            {t} {isTableReserved(t) && t !== selectedReservation?.table && '(예약됨)'}
                                                        </option>
                                                    ))}
                                                </optgroup>
                                                <optgroup label="3층 (4인)">
                                                    {tables.floor3.A.map(t => (
                                                        <option key={t} value={t} disabled={isTableReserved(t) && t !== selectedReservation?.table}>
                                                            {t} {isTableReserved(t) && t !== selectedReservation?.table && '(예약됨)'}
                                                        </option>
                                                    ))}
                                                </optgroup>
                                                <optgroup label="3층 (6인)">
                                                    {tables.floor3.B.map(t => (
                                                        <option key={t} value={t} disabled={isTableReserved(t) && t !== selectedReservation?.table}>
                                                            {t} {isTableReserved(t) && t !== selectedReservation?.table && '(예약됨)'}
                                                        </option>
                                                    ))}
                                                </optgroup>
                                            </select>
                                        </div>
                                        
                                        <div className="grid grid-cols-2 gap-3">
                                            <div>
                                                <label className="block text-sm font-medium mb-1">예약자명 *</label>
                                                <input
                                                    type="text"
                                                    value={formData.name}
                                                    onChange={(e) => setFormData({...formData, name: e.target.value})}
                                                    className="w-full border rounded px-3 py-2"
                                                    required
                                                />
                                            </div>
                                            
                                            <div>
                                                <label className="block text-sm font-medium mb-1">연락처 *</label>
                                                <input
                                                    type="tel"
                                                    value={formData.phone}
                                                    onChange={(e) => setFormData({...formData, phone: e.target.value})}
                                                    className="w-full border rounded px-3 py-2"
                                                    placeholder="010-0000-0000"
                                                    required
                                                />
                                            </div>
                                        </div>
                                        
                                        <div className="grid grid-cols-2 gap-3">
                                            <div>
                                                <label className="block text-sm font-medium mb-1">
                                                    인원 * {formData.table && `(최대 ${getTableCapacity(formData.table)}명)`}
                                                </label>
                                                <input
                                                    type="number"
                                                    value={formData.people}
                                                    onChange={(e) => setFormData({...formData, people: e.target.value})}
                                                    className="w-full border rounded px-3 py-2"
                                                    min="1"
                                                    max={formData.table ? getTableCapacity(formData.table) : 10}
                                                    required
                                                />
                                            </div>
                                            
                                            <div>
                                                <label className="block text-sm font-medium mb-1">시간 *</label>
                                                <select
                                                    value={formData.time}
                                                    onChange={(e) => setFormData({...formData, time: e.target.value})}
                                                    className="w-full border rounded px-3 py-2"
                                                    required
                                                >
                                                    <option value="">선택하세요</option>
                                                    {getTimeSlots().map(time => (
                                                        <option key={time} value={time}>{time}</option>
                                                    ))}
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <label className="block text-sm font-medium mb-1">메모</label>
                                            <textarea
                                                value={formData.memo}
                                                onChange={(e) => setFormData({...formData, memo: e.target.value})}
                                                className="w-full border rounded px-3 py-2"
                                                rows="2"
                                                placeholder="특별 요청사항"
                                            />
                                        </div>
                                        
                                        <div className="flex gap-2 pt-2">
                                            <button
                                                type="button"
                                                onClick={() => setShowForm(false)}
                                                className="flex-1 py-2 border border-gray-300 rounded text-gray-700"
                                            >
                                                취소
                                            </button>
                                            <button
                                                type="submit"
                                                className="flex-1 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
                                            >
                                                {selectedReservation ? '수정' : '등록'}
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }
        
        // 앱 렌더링
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
